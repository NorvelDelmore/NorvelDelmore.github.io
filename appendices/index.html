

<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.119.0">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Appendices | Matrix Specification</title>
<meta name="description" content="Unpadded Base64 Unpadded Base64 refers to &amp;lsquo;standard&amp;rsquo; Base64 encoding as defined in RFC 4648, without &amp;ldquo;=&amp;rdquo; padding. Specifically, where RFC 4648 requires that encoded data be padded to a multiple of four characters using = characters, unpadded Base64 omits this padding.
For reference, RFC 4648 uses the following alphabet for Base 64:
Value Encoding Value Encoding Value Encoding Value Encoding 0 A 17 R 34 i 51 z 1 B 18 S 35 j 52 0 2 C 19 T 36 k 53 1 3 D 20 U 37 l 54 2 4 E 21 V 38 m 55 3 5 F 22 W 39 n 56 4 6 G 23 X 40 o 57 5 7 H 24 Y 41 p 58 6 8 I 25 Z 42 q 59 7 9 J 26 a 43 r 60 8 10 K 27 b 44 s 61 9 11 L 28 c 45 t 62 &#43; 12 M 29 d 46 u 63 / 13 N 30 e 47 v 14 O 31 f 48 w 15 P 32 g 49 x 16 Q 33 h 50 y Examples of strings encoded using unpadded Base64:">
<meta property="og:title" content="Appendices" />
<meta property="og:description" content="Unpadded Base64 Unpadded Base64 refers to &lsquo;standard&rsquo; Base64 encoding as defined in RFC 4648, without &ldquo;=&rdquo; padding. Specifically, where RFC 4648 requires that encoded data be padded to a multiple of four characters using = characters, unpadded Base64 omits this padding.
For reference, RFC 4648 uses the following alphabet for Base 64:
Value Encoding Value Encoding Value Encoding Value Encoding 0 A 17 R 34 i 51 z 1 B 18 S 35 j 52 0 2 C 19 T 36 k 53 1 3 D 20 U 37 l 54 2 4 E 21 V 38 m 55 3 5 F 22 W 39 n 56 4 6 G 23 X 40 o 57 5 7 H 24 Y 41 p 58 6 8 I 25 Z 42 q 59 7 9 J 26 a 43 r 60 8 10 K 27 b 44 s 61 9 11 L 28 c 45 t 62 &#43; 12 M 29 d 46 u 63 / 13 N 30 e 47 v 14 O 31 f 48 w 15 P 32 g 49 x 16 Q 33 h 50 y Examples of strings encoded using unpadded Base64:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/appendices/" /><meta property="article:section" content="" />


<meta itemprop="name" content="Appendices">
<meta itemprop="description" content="Unpadded Base64 Unpadded Base64 refers to &lsquo;standard&rsquo; Base64 encoding as defined in RFC 4648, without &ldquo;=&rdquo; padding. Specifically, where RFC 4648 requires that encoded data be padded to a multiple of four characters using = characters, unpadded Base64 omits this padding.
For reference, RFC 4648 uses the following alphabet for Base 64:
Value Encoding Value Encoding Value Encoding Value Encoding 0 A 17 R 34 i 51 z 1 B 18 S 35 j 52 0 2 C 19 T 36 k 53 1 3 D 20 U 37 l 54 2 4 E 21 V 38 m 55 3 5 F 22 W 39 n 56 4 6 G 23 X 40 o 57 5 7 H 24 Y 41 p 58 6 8 I 25 Z 42 q 59 7 9 J 26 a 43 r 60 8 10 K 27 b 44 s 61 9 11 L 28 c 45 t 62 &#43; 12 M 29 d 46 u 63 / 13 N 30 e 47 v 14 O 31 f 48 w 15 P 32 g 49 x 16 Q 33 h 50 y Examples of strings encoded using unpadded Base64:">

<meta itemprop="wordCount" content="6287">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Appendices"/>
<meta name="twitter:description" content="Unpadded Base64 Unpadded Base64 refers to &lsquo;standard&rsquo; Base64 encoding as defined in RFC 4648, without &ldquo;=&rdquo; padding. Specifically, where RFC 4648 requires that encoded data be padded to a multiple of four characters using = characters, unpadded Base64 omits this padding.
For reference, RFC 4648 uses the following alphabet for Base 64:
Value Encoding Value Encoding Value Encoding Value Encoding 0 A 17 R 34 i 51 z 1 B 18 S 35 j 52 0 2 C 19 T 36 k 53 1 3 D 20 U 37 l 54 2 4 E 21 V 38 m 55 3 5 F 22 W 39 n 56 4 6 G 23 X 40 o 57 5 7 H 24 Y 41 p 58 6 8 I 25 Z 42 q 59 7 9 J 26 a 43 r 60 8 10 K 27 b 44 s 61 9 11 L 28 c 45 t 62 &#43; 12 M 29 d 46 u 63 / 13 N 30 e 47 v 14 O 31 f 48 w 15 P 32 g 49 x 16 Q 33 h 50 y Examples of strings encoded using unpadded Base64:"/>




<link rel="preload" href="/scss/main.min.af4c3a756149c6e6a38a514505696051afd07c3cc0ac1bb64498d5cd0c8f613b.css" as="style">
<link href="/scss/main.min.af4c3a756149c6e6a38a514505696051afd07c3cc0ac1bb64498d5cd0c8f613b.css" rel="stylesheet" integrity="">

<script
  src="/js/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK">
</script>



<link rel="preload" href="/css/fonts/Inter.css" as="style">
<link rel="stylesheet" href="/css/fonts/Inter.css">




<link rel="preload" href="/scss/custom.min.e7010c4aa0015f690b91b7b50c35f1a5f21ea69d2fe93db6b124deb2722a2dcf.css" as="style">
<link href="/scss/custom.min.e7010c4aa0015f690b91b7b50c35f1a5f21ea69d2fe93db6b124deb2722a2dcf.css" rel="stylesheet" integrity="">


  </head>
  <body class="td-page">
    <header>
      


<nav class="js-navbar-scroll navbar navbar-expand navbar-light flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg width="75" height="32" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M.936.732V31.25H3.13v.732H.095V0h3.034v.732zm8.45 9.675v1.544h.044a4.461 4.461.0 011.487-1.368c.58-.323 1.245-.485 1.993-.485.72.0 1.377.14 1.972.42.595.279 1.047.771 1.355 1.477.338-.5.796-.941 1.377-1.323.58-.383 1.266-.574 2.06-.574.602.0 1.16.074 1.674.22.514.148.954.383 1.322.707.366.323.653.746.859 1.268.205.522.308 1.15.308 1.887v7.633H20.71v-6.464c0-.383-.015-.743-.044-1.082a2.305 2.305.0 00-.242-.882 1.473 1.473.0 00-.584-.596c-.257-.146-.606-.22-1.047-.22-.44.0-.796.085-1.068.253-.272.17-.485.39-.639.662a2.654 2.654.0 00-.308.927 7.074 7.074.0 00-.078 1.048v6.354h-3.128v-6.398c0-.338-.007-.673-.021-1.004a2.825 2.825.0 00-.188-.916 1.411 1.411.0 00-.55-.673c-.258-.168-.636-.253-1.135-.253a2.33 2.33.0 00-.584.1 1.94 1.94.0 00-.705.374c-.228.184-.422.449-.584.794-.161.346-.242.798-.242 1.357v6.619H6.434V10.407h2.952zm16.456 1.677a3.751 3.751.0 011.233-1.17 5.37 5.37.0 011.685-.629 9.579 9.579.0 011.884-.187c.573.0 1.153.04 1.74.121.588.081 1.124.24 1.609.475.484.235.88.562 1.19.981.308.42.462.975.462 1.666v5.934c0 .516.03 1.008.088 1.478.058.471.161.824.308 1.06H32.87a4.435 4.435.0 01-.22-1.104c-.5.515-1.087.876-1.762 1.081a7.084 7.084.0 01-2.071.31c-.544.0-1.05-.067-1.52-.2a3.472 3.472.0 01-1.234-.617 2.87 2.87.0 01-.826-1.059c-.199-.426-.298-.934-.298-1.522.0-.647.114-1.18.342-1.6.227-.419.52-.753.881-1.004.36-.25.771-.437 1.234-.562.462-.125.929-.224 1.399-.298.47-.073.932-.132 1.387-.176.456-.044.86-.11 1.212-.199.353-.088.631-.217.837-.386.206-.169.301-.415.287-.74.0-.337-.055-.606-.166-.804a1.217 1.217.0 00-.44-.464 1.737 1.737.0 00-.639-.22 5.292 5.292.0 00-.782-.055c-.617.0-1.101.132-1.454.397-.352.264-.558.706-.617 1.323h-3.128c.044-.735.227-1.345.55-1.83zm6.179 4.423a5.095 5.095.0 01-.639.165 9.68 9.68.0 01-.716.11c-.25.03-.5.067-.749.11a5.616 5.616.0 00-.694.177 2.057 2.057.0 00-.594.298c-.17.125-.305.284-.408.474-.103.192-.154.434-.154.728.0.28.051.515.154.706.103.192.242.342.419.453.176.11.381.187.617.231.234.044.477.066.726.066.617.0 1.094-.102 1.432-.309.338-.205.587-.452.75-.739.16-.286.26-.576.297-.87.036-.295.055-.53.055-.707v-1.17a1.4 1.4.0 01-.496.277zm11.863-6.1v2.096h-2.291v5.647c0 .53.088.883.264 1.059.176.177.529.265 1.057.265.177.0.345-.007.507-.022.161-.015.316-.037.463-.066v2.426a7.49 7.49.0 01-.882.089 21.67 21.67.0 01-.947.022c-.484.0-.944-.034-1.377-.1a3.233 3.233.0 01-1.145-.386 2.04 2.04.0 01-.782-.816c-.191-.353-.287-.816-.287-1.39v-6.728H36.57v-2.096h1.894v-3.42h3.129v3.42h2.29zm4.471.0v2.118h.044a3.907 3.907.0 011.454-1.754 4.213 4.213.0 011.036-.497 3.734 3.734.0 011.145-.176c.206.0.433.037.683.11v2.912a5.862 5.862.0 00-.528-.077 5.566 5.566.0 00-.595-.033c-.573.0-1.058.096-1.454.287a2.52 2.52.0 00-.958.783 3.143 3.143.0 00-.518 1.158 6.32 6.32.0 00-.154 1.434v5.14h-3.128V10.407h2.973zM54.039 8.642V6.06h3.128v2.582H54.04zm3.128 1.765v11.405H54.04V10.407h3.128zm1.63.0h3.569l2.005 2.978 1.982-2.978h3.459l-3.745 5.339 4.208 6.067h-3.57l-2.378-3.596-2.38 3.596h-3.502l4.097-6.001zM74.094 31.25V.732H71.9V0h3.035v31.982H71.9v-.732z"/></g></svg></span><span class="font-weight-bold">specification</span><span class="navbar-version"> &mdash; unstable version</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">

			<li class="nav-item mr-4 mb-2 mb-lg-0"><a href="https://matrix.org/foundation/">Foundation</a>
			</li>

      <li class="nav-item mr-4 mb-2 mb-lg-0"><a href="https://matrix.org/faq/">FAQs</a>
			</li>

      <li class="nav-item mr-4 mb-2 mb-lg-0"><a href="https://matrix.org/blog/posts">Blog</a>
      </li>

			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"></div>
</nav>




    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-3 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m--li">
  <a href="/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-"><span class="">Matrix Specification</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-client-server-api-li">
  <a href="/client-server-api/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-client-server-api"><span class="">Client-Server API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-server-server-api-li">
  <a href="/server-server-api/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-server-server-api"><span class="">Server-Server API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-application-service-api-li">
  <a href="/application-service-api/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-application-service-api"><span class="">Application Service API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-identity-service-api-li">
  <a href="/identity-service-api/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-identity-service-api"><span class="">Identity Service API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-push-gateway-api-li">
  <a href="/push-gateway-api/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-push-gateway-api"><span class="">Push Gateway API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-rooms-li">
  <a href="/rooms/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-rooms"><span class="">Room Versions</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv1-li">
  <a href="/rooms/v1/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv1"><span class="">Room Version 1</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv2-li">
  <a href="/rooms/v2/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv2"><span class="">Room Version 2</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv3-li">
  <a href="/rooms/v3/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv3"><span class="">Room Version 3</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv4-li">
  <a href="/rooms/v4/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv4"><span class="">Room Version 4</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv5-li">
  <a href="/rooms/v5/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv5"><span class="">Room Version 5</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv6-li">
  <a href="/rooms/v6/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv6"><span class="">Room Version 6</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv7-li">
  <a href="/rooms/v7/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv7"><span class="">Room Version 7</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv8-li">
  <a href="/rooms/v8/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv8"><span class="">Room Version 8</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv9-li">
  <a href="/rooms/v9/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv9"><span class="">Room Version 9</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv10-li">
  <a href="/rooms/v10/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv10"><span class="">Room Version 10</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-roomsv11-li">
  <a href="/rooms/v11/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-roomsv11"><span class="">Room Version 11</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-proposals-li">
  <a href="/proposals/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-proposals"><span class="">Spec Change Proposals</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-appendices-li">
  <a href="/appendices/" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id="m-appendices"><span class="td-sidebar-nav-active-item">Appendices</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-changelog-li">
  <a href="/changelog/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-changelog"><span class="">Changelog</span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </div>
          <main class="col-12 col-md-9 col-xl-7 pl-md-5" role="main">
            






<div class="pageinfo pageinfo-primary pageinfo-unstable">
  <p>You're looking at an unstable version of this specification.
  Unstable specifications may change at any time without notice.</p>
  <p><a href="https://spec.matrix.org/latest">Switch to the current stable release</a>.</p>
</div>


            


<nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">





<li class="breadcrumb-item" >
	<a href="/">Matrix Specification</a>
</li>



<li class="breadcrumb-item active" aria-current="page">
	<a href="/appendices/">Appendices</a>
</li>

	</ol>
</nav	>




            
<div class="td-content">
	<h1>Appendices</h1>
	<h2 id="unpadded-base64">Unpadded Base64</h2>
<p><em>Unpadded</em> Base64 refers to &lsquo;standard&rsquo; Base64 encoding as defined in
<a href="https://tools.ietf.org/html/rfc4648">RFC 4648</a>, without &ldquo;=&rdquo; padding.
Specifically, where RFC 4648 requires that encoded data be padded to a
multiple of four characters using <code>=</code> characters, unpadded Base64 omits
this padding.</p>
<p>For reference, RFC 4648 uses the following alphabet for Base 64:</p>
<pre><code>Value Encoding  Value Encoding  Value Encoding  Value Encoding
    0 A            17 R            34 i            51 z
    1 B            18 S            35 j            52 0
    2 C            19 T            36 k            53 1
    3 D            20 U            37 l            54 2
    4 E            21 V            38 m            55 3
    5 F            22 W            39 n            56 4
    6 G            23 X            40 o            57 5
    7 H            24 Y            41 p            58 6
    8 I            25 Z            42 q            59 7
    9 J            26 a            43 r            60 8
   10 K            27 b            44 s            61 9
   11 L            28 c            45 t            62 +
   12 M            29 d            46 u            63 /
   13 N            30 e            47 v
   14 O            31 f            48 w
   15 P            32 g            49 x
   16 Q            33 h            50 y
</code></pre>
<p>Examples of strings encoded using unpadded Base64:</p>
<pre><code>UNPADDED_BASE64(&quot;&quot;) = &quot;&quot;
UNPADDED_BASE64(&quot;f&quot;) = &quot;Zg&quot;
UNPADDED_BASE64(&quot;fo&quot;) = &quot;Zm8&quot;
UNPADDED_BASE64(&quot;foo&quot;) = &quot;Zm9v&quot;
UNPADDED_BASE64(&quot;foob&quot;) = &quot;Zm9vYg&quot;
UNPADDED_BASE64(&quot;fooba&quot;) = &quot;Zm9vYmE&quot;
UNPADDED_BASE64(&quot;foobar&quot;) = &quot;Zm9vYmFy&quot;
</code></pre>
<p>When decoding Base64, implementations SHOULD accept input with or
without padding characters wherever possible, to ensure maximum
interoperability.</p>
<h2 id="binary-data">Binary data</h2>
<p>In some cases it is necessary to encapsulate binary data, for example,
public keys or signatures. Given that JSON cannot safely represent raw
binary data, all binary values should be encoded and represented in
JSON as unpadded Base64 strings as described above.</p>
<p>In cases where the Matrix specification refers to either opaque byte
or opaque Base64 values, the value is considered to be opaque AFTER
Base64 decoding, rather than the encoded representation itself.</p>
<p>It is safe for a client or homeserver implementation to check for
correctness of a Base64-encoded value at any point, and to altogether
reject a value which is not encoded properly. However, this is optional
and is considered to be an implementation detail.</p>
<p>Special consideration is given for future protocol transformations,
such as those which do not use JSON, where Base64 encoding may not be
necessary in order to represent a binary value safely. In these cases,
Base64 encoding of binary values may be skipped altogether.</p>
<h2 id="signing-json">Signing JSON</h2>
<p>Various points in the Matrix specification require JSON objects to be
cryptographically signed. This requires us to encode the JSON as a
binary string. Unfortunately the same JSON can be encoded in different
ways by changing how much white space is used or by changing the order
of keys within objects.</p>
<p>Signing an object therefore requires it to be encoded as a sequence of
bytes using <a href="#canonical-json">Canonical JSON</a>, computing the signature
for that sequence and then adding the signature to the original JSON
object.</p>
<h3 id="canonical-json">Canonical JSON</h3>
<p>To ensure that all implementations use the same JSON encoding we define
&ldquo;Canonical JSON&rdquo;. This should not be confused with other uses of
&ldquo;Canonical JSON&rdquo; outside of the specification.</p>
<p>We define this encoding for a value to be the shortest
UTF-8 JSON encoding with dictionary keys lexicographically sorted by
Unicode codepoint. Numbers in the JSON must be integers in the range
<code>[-(2**53)+1, (2**53)-1]</code>, represented without exponents or decimal
places, and negative zero <code>-0</code> MUST NOT appear.</p>
<p>We pick UTF-8 as the encoding as it should be available to all platforms
and JSON received from the network is likely to be already encoded using
UTF-8. We sort the keys to give a consistent ordering. We force integers
to be in the range where they can be accurately represented using IEEE
double precision floating point numbers since a number of JSON libraries
represent all numbers using this representation.</p>
<div class="alert warning " role="alert">
<p>Events in room versions 1, 2, 3, 4, and 5 might not be fully compliant
with these restrictions. Servers SHOULD be capable of handling JSON
which is considered invalid by these restrictions where possible.</p>
<p>The most notable consideration is that integers might not be in the
range specified above.</p>
</div>
<div class="alert note " role="alert">
Float values are not permitted by this encoding.
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">canonical_json</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">value</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Encode code-points outside of ASCII as UTF-8 rather than \u escapes</span>
</span></span><span class="line"><span class="cl">        <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Remove unnecessary white space.</span>
</span></span><span class="line"><span class="cl">        <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="s1">&#39;:&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Sort the keys of dictionaries.</span>
</span></span><span class="line"><span class="cl">        <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Encode the resulting Unicode as UTF-8 bytes.</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&#34;UTF-8&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="grammar">Grammar</h4>
<p>Adapted from the grammar in <a href="http://tools.ietf.org/html/rfc7159">http://tools.ietf.org/html/rfc7159</a>
removing insignificant whitespace, fractions, exponents and redundant
character escapes.</p>
<pre><code>value     = false / null / true / object / array / number / string
false     = %x66.61.6C.73.65
null      = %x6E.75.6C.6C
true      = %x74.72.75.65
object    = %x7B [ member *( %x2C member ) ] %x7D
member    = string %x3A value
array     = %x5B [ value *( %x2C value ) ] %x5D
number    = [ %x2D ] int
int       = %x30 / ( %x31-39 *digit )
digit     = %x30-39
string    = %x22 *char %x22
char      = unescaped / %x5C escaped
unescaped = %x20-21 / %x23-5B / %x5D-10FFFF
escaped   = %x22 ; &quot;    quotation mark  U+0022
          / %x5C ; \    reverse solidus U+005C
          / %x62 ; b    backspace       U+0008
          / %x66 ; f    form feed       U+000C
          / %x6E ; n    line feed       U+000A
          / %x72 ; r    carriage return U+000D
          / %x74 ; t    tab             U+0009
          / %x75.30.30.30 (%x30-37 / %x62 / %x65-66) ; u000X
          / %x75.30.30.31 (%x30-39 / %x61-66)        ; u001X
</code></pre>
<h4 id="examples">Examples</h4>
<p>To assist in the development of compatible implementations, the
following test values may be useful for verifying the canonical
transformation code.</p>
<p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{}</span>
</span></span></code></pre></div><p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;one&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;two&#34;</span><span class="p">:</span> <span class="s2">&#34;Two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;one&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&#34;two&#34;</span><span class="p">:</span><span class="s2">&#34;Two&#34;</span><span class="p">}</span>
</span></span></code></pre></div><p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;b&#34;</span><span class="p">:</span> <span class="s2">&#34;2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;a&#34;</span><span class="p">:</span> <span class="s2">&#34;1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;a&#34;</span><span class="p">:</span><span class="s2">&#34;1&#34;</span><span class="p">,</span><span class="nt">&#34;b&#34;</span><span class="p">:</span><span class="s2">&#34;2&#34;</span><span class="p">}</span>
</span></span></code></pre></div><p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;b&#34;</span><span class="p">:</span><span class="s2">&#34;2&#34;</span><span class="p">,</span><span class="nt">&#34;a&#34;</span><span class="p">:</span><span class="s2">&#34;1&#34;</span><span class="p">}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;a&#34;</span><span class="p">:</span><span class="s2">&#34;1&#34;</span><span class="p">,</span><span class="nt">&#34;b&#34;</span><span class="p">:</span><span class="s2">&#34;2&#34;</span><span class="p">}</span>
</span></span></code></pre></div><p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;auth&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;success&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;mxid&#34;</span><span class="p">:</span> <span class="s2">&#34;@john.doe:example.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;profile&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;display_name&#34;</span><span class="p">:</span> <span class="s2">&#34;John Doe&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;three_pids&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;medium&#34;</span><span class="p">:</span> <span class="s2">&#34;email&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;address&#34;</span><span class="p">:</span> <span class="s2">&#34;john.doe@example.org&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;medium&#34;</span><span class="p">:</span> <span class="s2">&#34;msisdn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;address&#34;</span><span class="p">:</span> <span class="s2">&#34;123456789&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;auth&#34;</span><span class="p">:{</span><span class="nt">&#34;mxid&#34;</span><span class="p">:</span><span class="s2">&#34;@john.doe:example.com&#34;</span><span class="p">,</span><span class="nt">&#34;profile&#34;</span><span class="p">:{</span><span class="nt">&#34;display_name&#34;</span><span class="p">:</span><span class="s2">&#34;John Doe&#34;</span><span class="p">,</span><span class="nt">&#34;three_pids&#34;</span><span class="p">:[{</span><span class="nt">&#34;address&#34;</span><span class="p">:</span><span class="s2">&#34;john.doe@example.org&#34;</span><span class="p">,</span><span class="nt">&#34;medium&#34;</span><span class="p">:</span><span class="s2">&#34;email&#34;</span><span class="p">},{</span><span class="nt">&#34;address&#34;</span><span class="p">:</span><span class="s2">&#34;123456789&#34;</span><span class="p">,</span><span class="nt">&#34;medium&#34;</span><span class="p">:</span><span class="s2">&#34;msisdn&#34;</span><span class="p">}]},</span><span class="nt">&#34;success&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">}}</span>
</span></span></code></pre></div><p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;a&#34;</span><span class="p">:</span> <span class="s2">&#34;日本語&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;a&#34;</span><span class="p">:</span><span class="s2">&#34;日本語&#34;</span><span class="p">}</span>
</span></span></code></pre></div><p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;本&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;日&#34;</span><span class="p">:</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;日&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&#34;本&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
</span></span></code></pre></div><p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;a&#34;</span><span class="p">:</span> <span class="s2">&#34;\u65E5&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;a&#34;</span><span class="p">:</span><span class="s2">&#34;日&#34;</span><span class="p">}</span>
</span></span></code></pre></div><p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;a&#34;</span><span class="p">:</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;a&#34;</span><span class="p">:</span><span class="kc">null</span><span class="p">}</span>
</span></span></code></pre></div><p>Given the following JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;a&#34;</span><span class="p">:</span> <span class="mi">-0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;b&#34;</span><span class="p">:</span> <span class="mf">1e10</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The following canonical JSON should be produced:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;a&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&#34;b&#34;</span><span class="p">:</span><span class="mi">10000000000</span><span class="p">}</span>
</span></span></code></pre></div><h3 id="signing-details">Signing Details</h3>
<p>JSON is signed by encoding the JSON object without <code>signatures</code> or keys
grouped as <code>unsigned</code>, using the canonical encoding described above. The
JSON bytes are then signed using the signature algorithm and the
signature is encoded using <a href="#unpadded-base64">unpadded Base64</a>. The resulting base64
signature is added to an object under the <em>signing key identifier</em> which
is added to the <code>signatures</code> object under the name of the entity signing
it which is added back to the original JSON object along with the
<code>unsigned</code> object.</p>
<p>The <em>signing key identifier</em> is the concatenation of the <em>signing
algorithm</em> and a <em>key identifier</em>. The <em>signing algorithm</em> identifies
the algorithm used to sign the JSON. The currently supported value for
<em>signing algorithm</em> is <code>ed25519</code> as implemented by NACL
(<a href="http://nacl.cr.yp.to/">http://nacl.cr.yp.to/</a>). The <em>key identifier</em> is used to distinguish
between different signing keys used by the same entity.</p>
<p>The <code>unsigned</code> object and the <code>signatures</code> object are not covered by the
signature. Therefore intermediate entities can add unsigned data such as
timestamps and additional signatures.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;example.org&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;signing_keys&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;ed25519:1&#34;</span><span class="p">:</span> <span class="s2">&#34;XSl0kuyvrXNj6A+7/tkrB9sxSbRi08Of5uRhxOqZtEQ&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="p">},</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;unsigned&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;age_ts&#34;</span><span class="p">:</span> <span class="mi">922834800000</span>
</span></span><span class="line"><span class="cl">   <span class="p">},</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;signatures&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;example.org&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&#34;ed25519:1&#34;</span><span class="p">:</span> <span class="s2">&#34;s76RUgajp8w172am0zQb/iPTHsRnb4SkrzGoeCOSFfcBY2V/1c8QfrmdXHpvnc2jK5BD1WiJIxiMW95fMjK7Bw&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">sign_json</span><span class="p">(</span><span class="n">json_object</span><span class="p">,</span> <span class="n">signing_key</span><span class="p">,</span> <span class="n">signing_name</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">signatures</span> <span class="o">=</span> <span class="n">json_object</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&#34;signatures&#34;</span><span class="p">,</span> <span class="p">{})</span>
</span></span><span class="line"><span class="cl">    <span class="n">unsigned</span> <span class="o">=</span> <span class="n">json_object</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&#34;unsigned&#34;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">signed</span> <span class="o">=</span> <span class="n">signing_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">encode_canonical_json</span><span class="p">(</span><span class="n">json_object</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">signature_base64</span> <span class="o">=</span> <span class="n">encode_base64</span><span class="p">(</span><span class="n">signed</span><span class="o">.</span><span class="n">signature</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">key_id</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">signing_key</span><span class="o">.</span><span class="n">alg</span><span class="p">,</span> <span class="n">signing_key</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">signatures</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">signing_name</span><span class="p">,</span> <span class="p">{})[</span><span class="n">key_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature_base64</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">json_object</span><span class="p">[</span><span class="s2">&#34;signatures&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">signatures</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">unsigned</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">json_object</span><span class="p">[</span><span class="s2">&#34;unsigned&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unsigned</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">json_object</span>
</span></span></code></pre></div><h3 id="checking-for-a-signature">Checking for a Signature</h3>
<p>To check if an entity has signed a JSON object an implementation does
the following:</p>
<ol>
<li>Checks if the <code>signatures</code> member of the object contains an entry
with the name of the entity. If the entry is missing then the check
fails.</li>
<li>Removes any <em>signing key identifiers</em> from the entry with algorithms
it doesn&rsquo;t understand. If there are no <em>signing key identifiers</em>
left then the check fails.</li>
<li>Looks up <em>verification keys</em> for the remaining <em>signing key
identifiers</em> either from a local cache or by consulting a trusted
key server. If it cannot find a <em>verification key</em> then the check
fails.</li>
<li>Decodes the base64 encoded signature bytes. If base64 decoding fails
then the check fails.</li>
<li>Removes the <code>signatures</code> and <code>unsigned</code> members of the object.</li>
<li>Encodes the remainder of the JSON object using the <a href="#canonical-json">Canonical
JSON</a> encoding.</li>
<li>Checks the signature bytes against the encoded object using the
<em>verification key</em>. If this fails then the check fails. Otherwise
the check succeeds.</li>
</ol>
<h2 id="identifier-grammar">Identifier Grammar</h2>
<p>Some identifiers are specific to given room versions, please refer to
the <a href="/rooms">room versions specification</a> for more
information.</p>
<h3 id="common-namespaced-identifier-grammar">Common Namespaced Identifier Grammar</h3>
<p><span><strong>[Added in <code>v1.2</code>]</strong></span></p>
<p>The specification defines some identifiers to use the <em>Common Namespaced
Identifier Grammar</em>. This is a common grammar intended for non-user-visible
identifiers, with a defined mechanism for implementations to create new
identifiers.</p>
<p>The grammar is defined as follows:</p>
<ul>
<li>An identifier must be at least one character and at most 255 characters
in length.</li>
<li>Identifiers must start with one of the characters <code>[a-z]</code>, and be entirely
composed of the characters <code>[a-z]</code>, <code>[0-9]</code>, <code>-</code>, <code>_</code> and <code>.</code>.</li>
<li>Identifiers starting with the characters <code>m.</code> are reserved for use by the
official Matrix specification.</li>
<li>Identifiers which are not described in the specification should follow the
Java Package Naming Convention to namespace their identifier. This is typically
a reverse DNS format, such as <code>com.example.identifier</code>.</li>
</ul>
<div class="alert note " role="alert">
Identifiers can and do inherit grammar from this specification. For example, &ldquo;this
identifier uses the Common Namespaced Identifier Grammar, though without the namespacing
requirements&rdquo; - this means that <code>m.</code> is still reserved, but that implementations
do not have to use the reverse DNS scheme to namespace their custom identifier.
</div>
<div class="alert rationale " role="alert">
ASCII characters do not have issues with homoglyphs or alternative encodings which
might interfere with the identifier&rsquo;s purpose. Additionally, using lowercase
characters prevents concerns about case sensitivity.
</div>
<h3 id="server-name">Server Name</h3>
<p>A homeserver is uniquely identified by its server name. This value is
used in a number of identifiers, as described below.</p>
<p>The server name represents the address at which the homeserver in
question can be reached by other homeservers. All valid server names are
included by the following grammar:</p>
<pre><code>server_name = hostname [ &quot;:&quot; port ]

port        = 1*5DIGIT

hostname    = IPv4address / &quot;[&quot; IPv6address &quot;]&quot; / dns-name

IPv4address = 1*3DIGIT &quot;.&quot; 1*3DIGIT &quot;.&quot; 1*3DIGIT &quot;.&quot; 1*3DIGIT

IPv6address = 2*45IPv6char

IPv6char    = DIGIT / %x41-46 / %x61-66 / &quot;:&quot; / &quot;.&quot;
                  ; 0-9, A-F, a-f, :, .

dns-name    = 1*255dns-char

dns-char    = DIGIT / ALPHA / &quot;-&quot; / &quot;.&quot;
</code></pre>
<p>— in other words, the server name is the hostname, followed by an
optional numeric port specifier. The hostname may be a dotted-quad IPv4
address literal, an IPv6 address literal surrounded with square
brackets, or a DNS name.</p>
<p>IPv4 literals must be a sequence of four decimal numbers in the range 0
to 255, separated by <code>.</code>. IPv6 literals must be as specified by
<a href="https://tools.ietf.org/html/rfc3513#section-2.2">RFC3513, section 2.2</a>.</p>
<p>DNS names for use with Matrix should follow the conventional
restrictions for internet hostnames: they should consist of a series of
labels separated by <code>.</code>, where each label consists of the alphanumeric
characters or hyphens.</p>
<p>Examples of valid server names are:</p>
<ul>
<li><code>matrix.org</code></li>
<li><code>matrix.org:8888</code></li>
<li><code>1.2.3.4</code> (IPv4 literal)</li>
<li><code>1.2.3.4:1234</code> (IPv4 literal with explicit port)</li>
<li><code>[1234:5678::abcd]</code> (IPv6 literal)</li>
<li><code>[1234:5678::abcd]:5678</code> (IPv6 literal with explicit port)</li>
</ul>
<div class="alert note " role="alert">
This grammar is based on the standard for internet host names, as
specified by <a href="https://tools.ietf.org/html/rfc1123#page-13">RFC1123, section
2.1</a>, with an extension for
IPv6 literals.
</div>
<p>Server names must be treated case-sensitively: in other words,
<code>@user:matrix.org</code> is a different person from <code>@user:MATRIX.ORG</code>.</p>
<p>Some recommendations for a choice of server name follow:</p>
<ul>
<li>The length of the complete server name should not exceed 230
characters.</li>
<li>Server names should not use upper-case characters.</li>
</ul>
<h3 id="common-identifier-format">Common Identifier Format</h3>
<p>The Matrix protocol uses a common format to assign unique identifiers to
a number of entities, including users, events and rooms. Each identifier
takes the form:</p>
<pre><code>&amp;string
</code></pre>
<p>where <code>&amp;</code> represents a &lsquo;sigil&rsquo; character; <code>string</code> is the string which
makes up the identifier.</p>
<p>The sigil characters are as follows:</p>
<ul>
<li><code>@</code>: User ID</li>
<li><code>!</code>: Room ID</li>
<li><code>$</code>: Event ID</li>
<li><code>#</code>: Room alias</li>
</ul>
<p>User IDs, room IDs, room aliases, and sometimes event IDs
take the form:</p>
<pre><code>&amp;localpart:domain
</code></pre>
<p>where <code>domain</code> is the <a href="#server-name">server name</a> of the homeserver
which allocated the identifier, and <code>localpart</code> is an identifier
allocated by that homeserver.</p>
<p>The precise grammar defining the allowable format of an identifier
depends on the type of identifier. For example, event IDs can sometimes
be represented with a <code>domain</code> component under some conditions - see the
<a href="#event-ids">Event IDs</a> section below for more information.</p>
<h4 id="user-identifiers">User Identifiers</h4>
<p><span><strong>[Changed in <code>v1.8</code>]</strong></span></p>
<p>Users within Matrix are uniquely identified by their Matrix user ID. The
user ID is namespaced to the homeserver which allocated the account and
has the form:</p>
<pre><code>@localpart:domain
</code></pre>
<p>The <code>localpart</code> of a user ID is an opaque identifier for that user. It
MUST NOT be empty, and MUST contain only the characters <code>a-z</code>, <code>0-9</code>,
<code>.</code>, <code>_</code>, <code>=</code>, <code>-</code>, <code>/</code>, and <code>+</code>.</p>
<p>The <code>domain</code> of a user ID is the <a href="#server-name">server name</a> of the
homeserver which allocated the account.</p>
<p>The length of a user ID, including the <code>@</code> sigil and the domain, MUST
NOT exceed 255 characters.</p>
<p>The complete grammar for a legal user ID is:</p>
<pre><code>user_id = &quot;@&quot; user_id_localpart &quot;:&quot; server_name
user_id_localpart = 1*user_id_char
user_id_char = DIGIT
             / %x61-7A                   ; a-z
             / &quot;-&quot; / &quot;.&quot; / &quot;=&quot; / &quot;_&quot; / &quot;/&quot; / &quot;+&quot;
</code></pre>
<div class="alert rationale " role="alert">
<p>A number of factors were considered when defining the allowable
characters for a user ID.</p>
<p>Firstly, we chose to exclude characters outside the basic US-ASCII
character set. User IDs are primarily intended for use as an identifier
at the protocol level, and their use as a human-readable handle is of
secondary benefit. Furthermore, they are useful as a last-resort
differentiator between users with similar display names. Allowing the
full Unicode character set would make very difficult for a human to
distinguish two similar user IDs. The limited character set used has the
advantage that even a user unfamiliar with the Latin alphabet should be
able to distinguish similar user IDs manually, if somewhat laboriously.</p>
<p>We chose to disallow upper-case characters because we do not consider it
valid to have two user IDs which differ only in case: indeed it should
be possible to reach <code>@user:matrix.org</code> as <code>@USER:matrix.org</code>. However,
user IDs are necessarily used in a number of situations which are
inherently case-sensitive (notably in the <code>state_key</code> of <code>m.room.member</code>
events). Forbidding upper-case characters (and requiring homeservers to
downcase usernames when creating user IDs for new users) is a relatively
simple way to ensure that <code>@USER:matrix.org</code> cannot refer to a different
user to <code>@user:matrix.org</code>.</p>
<p>Finally, we decided to restrict the allowable punctuation to a very
basic set to reduce the possibility of conflicts with special characters
in various situations. For example, &ldquo;*&rdquo; is used as a wildcard in some
APIs (notably the filter API), so it cannot be a legal user ID
character.</p>
<p>The length restriction is derived from the limit on the length of the
<code>sender</code> key on events; since the user ID appears in every event sent by
the user, it is limited to ensure that the user ID does not dominate
over the actual content of the events.</p>
</div>
<p>Matrix user IDs are sometimes informally referred to as MXIDs.</p>
<h5 id="historical-user-ids">Historical User IDs</h5>
<p>Older versions of this specification were more tolerant of the
characters permitted in user ID localparts. There are currently active
users whose user IDs do not conform to the permitted character set, and
a number of rooms whose history includes events with a <code>sender</code> which
does not conform. In order to handle these rooms successfully, clients
and servers MUST accept user IDs with localparts from the expanded
character set:</p>
<pre><code>extended_user_id_char = %x21-39 / %x3B-7E  ; all ASCII printing chars except :
</code></pre>
<h5 id="mapping-from-other-character-sets">Mapping from other character sets</h5>
<p>In certain circumstances it will be desirable to map from a wider
character set onto the limited character set allowed in a user ID
localpart. Examples include a homeserver creating a user ID for a new
user based on the username passed to <code>/register</code>, or a bridge mapping
user ids from another protocol.</p>
<p>Implementations are free to do this mapping however they choose. Since
the user ID is opaque except to the implementation which created it, the
only requirement is that the implementation can perform the mapping
consistently. However, we suggest the following algorithm:</p>
<ol>
<li>Encode character strings as UTF-8.</li>
<li>Convert the bytes <code>A-Z</code> to lower-case.
<ul>
<li>In the case where a bridge must be able to distinguish two
different users with ids which differ only by case, escape
upper-case characters by prefixing with <code>_</code> before downcasing.
For example, <code>A</code> becomes <code>_a</code>. Escape a real <code>_</code> with a second
<code>_</code>.</li>
</ul>
</li>
<li>Encode any remaining bytes outside the allowed character set, as
well as <code>=</code>, as their hexadecimal value, prefixed with <code>=</code>. For
example, <code>#</code> becomes <code>=23</code>; <code>á</code> becomes <code>=c3=a1</code>.</li>
</ol>
<div class="alert rationale " role="alert">
The suggested mapping is an attempt to preserve human-readability of
simple ASCII identifiers (unlike, for example, base-32), whilst still
allowing representation of <em>any</em> character (unlike punycode, which
provides no way to encode ASCII punctuation).
</div>
<h4 id="room-ids">Room IDs</h4>
<p>A room has exactly one room ID. A room ID has the format:</p>
<pre><code>!opaque_id:domain
</code></pre>
<p>The <code>domain</code> of a room ID is the <a href="#server-name">server name</a> of the
homeserver which created the room. The domain is used only for
namespacing to avoid the risk of clashes of identifiers between
different homeservers. There is no implication that the room in
question is still available at the corresponding homeserver.</p>
<p>Room IDs are case-sensitive. They are not meant to be
human-readable. They are intended to be treated as fully opaque strings
by clients.</p>
<h4 id="room-aliases">Room Aliases</h4>
<p>A room may have zero or more aliases. A room alias has the format:</p>
<pre><code>#room_alias:domain
</code></pre>
<p>The <code>domain</code> of a room alias is the <a href="#server-name">server name</a> of the
homeserver which created the alias. Other servers may contact this
homeserver to look up the alias.</p>
<p>Room aliases MUST NOT exceed 255 bytes (including the <code>#</code> sigil and the
domain).</p>
<h4 id="event-ids">Event IDs</h4>
<p>An event has exactly one event ID. Event IDs take the form:</p>
<pre><code>$opaque_id
</code></pre>
<p>However, the precise format depends upon the <a href="/rooms">room version
specification</a>: early room versions included a <code>domain</code> component,
whereas more recent versions omit the domain and use a base64-encoded hash instead.</p>
<p>Event IDs are case-sensitive. They are not meant to be human-readable. They are
intended to be treated as fully opaque strings by clients.</p>
<h3 id="uris">URIs</h3>
<p>There are two major kinds of referring to a resource in Matrix: matrix.to
and <code>matrix:</code> URI. The specification currently defines both as active/valid
ways to refer to entities/resources.</p>
<p>Rooms, users, and aliases may be represented as a URI. This URI can
be used to reference particular objects in a given context, such as mentioning
a user in a message or linking someone to a particular point in the room&rsquo;s
history (a permalink).</p>
<h4 id="matrix-uri-scheme">Matrix URI scheme</h4>
<p><span><strong>[Added in <code>v1.2</code>]</strong></span></p>
<p>The Matrix URI scheme is defined as follows (<code>[]</code> enclose optional parts, <code>{}</code>
enclose variables):</p>
<pre tabindex="0"><code>matrix:[//{authority}/]{type}/{id without sigil}[/{type}/{id without sigil}...][?{query}][#{fragment}]
</code></pre><p>As a schema, this can be represented as:</p>
<pre tabindex="0"><code>MatrixURI = &#34;matrix:&#34; hier-part [ &#34;?&#34; query ] [ &#34;#&#34; fragment ]
hier-part = [ &#34;//&#34; authority &#34;/&#34; ] path
path = entity-descriptor [&#34;/&#34; entity-descriptor]
entity-descriptor = nonid-segment / type-qualifier id-without-sigil
nonid-segment = segment-nz ; as defined in RFC 3986
type-qualifier = segment-nz &#34;/&#34; ; as defined in RFC 3986
id-without-sigil = string ; as defined in Matrix identifier spec above
query = query-element *( &#34;&amp;&#34; query-item )
query-item = action / routing / custom-query-item
action = &#34;action=&#34; ( &#34;join&#34; / &#34;chat&#34; )
routing = &#34;via=” authority
custom-query-item = custom-item-name &#34;=&#34; custom-item-value
custom-item-name = 1*unreserved ; reverse-DNS name
custom-item-value =
</code></pre><p>Note that this format is deliberately following <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a>
to ensure maximum compatibility with existing tooling. The scheme name (<code>matrix</code>) is
registered alongside other schemes by the IANA <a href="https://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml">here</a>.</p>
<p>Currently, the <code>authority</code> and <code>fragment</code> are unused by this specification,
though are reserved for future use. Matrix does not have a central authority which
could reasonably fill the <code>authority</code> role. <code>nonid-segment</code> in the schema is
additionally reserved for future use.</p>
<p>The <code>type</code> denotes the kind of entity which is described by <code>id without sigil</code>.
Specifically, the following mappings are used:</p>
<ul>
<li><code>r</code> for room aliases.</li>
<li><code>u</code> for users.</li>
<li><code>roomid</code> for room IDs (note the distinction from room aliases).</li>
<li><code>e</code> for events, when after a room reference (<code>r</code> or <code>roomid</code>).</li>
</ul>
<div class="alert note " role="alert">
<p>During development of this URI format, types of <code>user</code>, <code>room</code>, and <code>event</code>
were used: these MUST NOT be produced any further, though implementations might
wish to consider handling them as <code>u</code>, <code>r</code>, and <code>e</code> respectively.</p>
<p><code>roomid</code> was otherwise unchanged.</p>
</div>
<p>The <code>id without sigil</code> is simply the identifier for the entity without the defined
sigil. For example, <code>!room:example.org</code> becomes <code>room:example.org</code> (<code>!</code> is the sigil
for room IDs). The sigils are described under the
<a href="#common-identifier-format">Common Identifier Format</a>.</p>
<p>The <code>query</code> is optional and helps clients with processing the URI&rsquo;s intent. In
this specification are the following:</p>
<ul>
<li><code>action</code> - Helps provide intent for what the client should do specifically with
the URI. Lack of an <code>action</code> simply indicates that the URI is identifying a resource
and has no suggested action associated with it - clients could treat this as
navigating the user to an informational page, for example.
<ul>
<li><code>action=join</code> - Describes an intent for the client to join the room described
by the URI and thus is only valid on URIs which are referring to a room (it
has no meaning and is ignored otherwise). The client should prompt for confirmation
prior to joining the room, if the user isn&rsquo;t already part of the room.</li>
<li><code>action=chat</code> - Describes an intent for the client to start/open a DM with
the user described by the URI and thus is only valid on URIs which are referring
to a user (it has no meaning and is ignored otherwise). Clients supporting a
form of Canonical DMs should reuse existing DMs instead of creating new ones
if available. The client should prompt for confirmation prior to creating the
DM, if the user isn&rsquo;t being redirected to an existing canonical DM.</li>
</ul>
</li>
<li><code>via</code> - Can be used to denote which servers (<code>authority</code> grammar) to attempt to resolve
the resource through, or take <code>action</code> through. An example of using <code>via</code> for
routing Room IDs is described <a href="#routing">below</a>, and is encouraged for use in
Matrix URIs referring to a room ID. Matrix URIs can additionally use this <code>via</code>
parameter for non-public federation resolution of identifiers (i.e.: listing a
server which might have information about the given user) while a more comprehensive
way is being worked out, such as one proposed by <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3020">MSC3020</a>.</li>
</ul>
<p>Custom query parameters can be specified using the
<a href="#common-namespaced-identifier-grammar">Common Namespaced Identifier format</a> and
appropriately encoding their values. Specifically, &ldquo;percent encoding&rdquo; and encoding
of the <code>&amp;</code> are required. Where custom parameters conflict with specified ones,
clients should prefer the specified parameters. Clients should strive to maintain
consistency across custom parameters as users might be using multiple different
clients across multiple different authors. Useful and mission-aligned custom
parameters should be proposed to be included in this specification.</p>
<p>Examples of common URIs are:</p>
<!-- Author's note: These examples should be consistent with the matrix.to counterparts. -->
<ul>
<li>Link to <code>#somewhere:example.org</code>: <code>matrix:r/somewhere:example.org</code></li>
<li>Link to <code>!somewhere:example.org</code>: <code>matrix:roomid/somewhere:example.org?via=elsewhere.ca</code></li>
<li>Link to <code>$event</code> in <code>#somewhere:example.org</code>: <code>matrix:r/somewhere:example.org/e/event</code></li>
<li>Link to <code>$event</code> in <code>!somewhere:example.org</code>: <code>matrix:roomid/somewhere:example.org/e/event?via=elsewhere.ca</code></li>
<li>Link to chat with <code>@alice:example.org</code>: <code>matrix:u/alice:example.org?action=chat</code></li>
</ul>
<p>A suggested client implementation algorithm is available in the
<a href="https://github.com/matrix-org/matrix-spec-proposals/blob/main/proposals/2312-matrix-uri.md#recommended-implementation">original MSC</a>.</p>
<h4 id="matrixto-navigation">matrix.to navigation</h4>
<div class="alert note " role="alert">
This namespacing existed prior to a <code>matrix:</code> scheme. This is <strong>not</strong>
meant to be interpreted as an available web service - see below for more
details.
</div>
<p>A matrix.to URI has the following format, based upon the specification
defined in <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a>:</p>
<pre tabindex="0"><code>https://matrix.to/#/&lt;identifier&gt;/&lt;extra parameter&gt;?&lt;additional arguments&gt;
</code></pre><p>The identifier may be a room ID, room alias, or user ID. The
extra parameter is only used in the case of permalinks where an event ID
is referenced. The matrix.to URI, when referenced, must always start
with <code>https://matrix.to/#/</code> followed by the identifier.</p>
<p>The <code>&lt;additional arguments&gt;</code> and the preceding question mark are
optional and only apply in certain circumstances, documented below.</p>
<p>Clients should not rely on matrix.to URIs falling back to a web server
if accessed and instead should perform some sort of action within the
client. For example, if the user were to click on a matrix.to URI for a
room alias, the client may open a view for the user to participate in
the room.</p>
<p>The components of the matrix.to URI (<code>&lt;identifier&gt;</code> and
<code>&lt;extra parameter&gt;</code>) are to be percent-encoded as per RFC 3986.</p>
<p>Examples of matrix.to URIs are:</p>
<!-- Author's note: These examples should be consistent with the matrix scheme counterparts. -->
<ul>
<li>Link to <code>#somewhere:example.org</code>: <code>https://matrix.to/#/%23somewhere%3Aexample.org</code></li>
<li>Link to <code>!somewhere:example.org</code>: <code>https://matrix.to/#/!somewhere%3Aexample.org?via=elsewhere.ca</code></li>
<li>Link to <code>$event</code> in <code>#somewhere:example.org</code>: <code>https://matrix.to/#/%23somewhere:example.org/%24event%3Aexample.org</code></li>
<li>Link to <code>$event</code> in <code>!somewhere:example.org</code>: <code>https://matrix.to/#/!somewhere%3Aexample.org/%24event%3Aexample.org?via=elsewhere.ca</code></li>
<li>Link to <code>@alice:example.org</code>: <code>https://matrix.to/#/%40alice%3Aexample.org</code></li>
</ul>
<div class="alert note " role="alert">
Historically, clients have not produced URIs which are fully encoded.
Clients should try to interpret these cases to the best of their
ability. For example, an unencoded room alias should still work within
the client if possible.
</div>
<div class="alert note " role="alert">
Clients should be aware that decoding a matrix.to URI may result in
extra slashes appearing due to some <a href="/rooms">room
versions</a>. These slashes should normally be
encoded when producing matrix.to URIs, however.
</div>
<div class="alert note " role="alert">
In prior versions of this specification, a concept of &ldquo;groups&rdquo; were mentioned
to organize rooms. This functionality did not properly get introduced into
the specification and is subsequently replaced with <a href="/client-server-api/#spaces">Spaces</a>. Historical
matrix.to URIs pointing to groups might still exist: they take the form
<code>https://matrix.to/#/%2Bexample%3Aexample.org</code> (where the <code>+</code> sigil may or
may not be encoded).
</div>
<h4 id="routing">Routing</h4>
<p>Room IDs are not routable on their own as there is no reliable domain to
send requests to. This is partially mitigated with the addition of a
<code>via</code> argument on a URI, however the problem of routability is
still present. Clients should do their best to route Room IDs to where
they need to go, however they should also be aware of <a href="https://github.com/matrix-org/matrix-spec/issues/355">issue
#1579</a>.</p>
<p>A room (or room permalink) which isn&rsquo;t using a room alias should supply
at least one server using <code>via</code> in the URI&rsquo;s query string. Multiple servers
can be specified by including multuple <code>via</code> parameters.</p>
<p>The values of <code>via</code> are intended to be passed along as the <code>server_name</code>
parameters on the <a href="/client-server-api/#post_matrixclientv3joinroomidoralias">Client Server <code>/join/{roomIdOrAlias}</code> API</a>.</p>
<p>When generating room links and permalinks, the application should pick
servers which have a high probability of being in the room in the
distant future. How these servers are picked is left as an
implementation detail, however the current recommendation is to pick 3
unique servers based on the following criteria:</p>
<ul>
<li>The first server should be the server of the highest power level
user in the room, provided they are at least power level 50. If no
user meets this criterion, pick the most popular server in the room
(most joined users). The rationale for not picking users with power
levels under 50 is that they are unlikely to be around into the
distant future while higher ranking users (and therefore servers)
are less likely to give up their power and move somewhere else. Most
rooms in the public federation have a power level 100 user and have
not deviated from the default structure where power level 50 users
have moderator-style privileges.</li>
<li>The second server should be the next highest server by population,
or the first highest by population if the first server was based on
a user&rsquo;s power level. The rationale for picking popular servers is
that the server is unlikely to be removed as the room naturally
grows in membership due to that server joining users. The server
could be refused participation in the future due to server ACLs or
similar, however the chance of that happening to a server which is
organically joining the room is unlikely.</li>
<li>The third server should be the next highest server by population.</li>
<li>Servers which are blocked due to server ACLs should never be chosen.</li>
<li>Servers which are IP addresses should never be chosen. Servers which
use a domain name are less likely to be unroutable in the future
whereas IP addresses cannot be pointed to a different location and
therefore higher risk options.</li>
<li>All 3 servers should be unique from each other. If the room does not
have enough users to supply 3 servers, the application should only
specify the servers it can. For example, a room with only 2 users in
it would result in maximum 2 <code>via</code> parameters.</li>
</ul>
<h2 id="3pid-types">3PID Types</h2>
<p>Third-party Identifiers (3PIDs) represent identifiers on other
namespaces that might be associated with a particular person. They
comprise a tuple of <code>medium</code> which is a string that identifies the
namespace in which the identifier exists, and an <code>address</code>: a string
representing the identifier in that namespace. This must be a canonical
form of the identifier, <em>i.e.</em> if multiple strings could represent the
same identifier, only one of these strings must be used in a 3PID
address, in a well-defined manner.</p>
<p>For example, for e-mail, the <code>medium</code> is &rsquo;email&rsquo; and the <code>address</code> would
be the email address, <em>e.g.</em> the string <code>bob@example.com</code>. Since domain
resolution is case-insensitive, the email address <code>bob@Example.com</code> is
also has the 3PID address of <code>bob@example.com</code> (without the capital &rsquo;e&rsquo;)
rather than <code>bob@Example.com</code>.</p>
<p>The namespaces defined by this specification are listed below. More
namespaces may be defined in future versions of this specification.</p>
<h3 id="e-mail">E-Mail</h3>
<p>Medium: <code>email</code></p>
<p>Represents E-Mail addresses. The <code>address</code> is the raw email address in
<code>user@domain</code> form with the domain in lowercase. It must not contain
other text such as real name, angle brackets or a mailto: prefix.</p>
<p>In addition to lowercasing the domain component of an email address,
implementations are expected to apply the unicode case-folding algorithm
as described under &ldquo;Caseless Matching&rdquo; in
<a href="https://www.unicode.org/versions/Unicode13.0.0/ch05.pdf#G21790">chapter 5 of the unicode standard</a>.
For example, <code>Strauß@Example.com</code> must be considered to be <code>strauss@example.com</code>
while processing the email address.</p>
<h3 id="pstn-phone-numbers">PSTN Phone numbers</h3>
<p>Medium: <code>msisdn</code></p>
<p>Represents telephone numbers on the public switched telephone network.
The <code>address</code> is the telephone number represented as a MSISDN (Mobile
Station International Subscriber Directory Number) as defined by the
E.164 numbering plan. Note that MSISDNs do not include a leading &lsquo;+&rsquo;.</p>
<h2 id="glob-style-matching">Glob-style matching</h2>
<p>It is useful to match strings via globbing in some situations. Globbing in Matrix
uses the following rules:</p>
<ul>
<li>The character <code>*</code> matches zero or more characters.</li>
<li><code>?</code> matches exactly one character.</li>
</ul>
<h2 id="dot-separated-property-paths">Dot-separated property paths</h2>
<p>It is useful to express the &ldquo;path&rdquo; to an event property by concatenating property
names with dots, e.g. <code>content.body</code> would represent a <code>body</code> property in the
event&rsquo;s <code>content</code>.</p>
<p>To handle ambiguity when a property name contains a dot, any literal dot or
backslash found in a property name should be escaped with a backslash. E.g. a
property <code>m.relates_to</code> in the <code>content</code> would be expressed as
<code>content.m\.relates_to</code>. Similarly, a <code>content</code> property named <code>m\foo</code> would be
expressed as <code>content.m\\foo</code>.</p>
<p>Other escape sequences are left as-is, e.g. a <code>\x</code> would be treated as a literal
backslash followed by &lsquo;x&rsquo;. It is recommended that implementations do not redundantly
escape characters, as other escape sequences are reserved for future use.</p>
<h2 id="security-threat-model">Security Threat Model</h2>
<h3 id="denial-of-service">Denial of Service</h3>
<p>The attacker could attempt to prevent delivery of messages to or from
the victim in order to:</p>
<ul>
<li>Disrupt service or marketing campaign of a commercial competitor.</li>
<li>Censor a discussion or censor a participant in a discussion.</li>
<li>Perform general vandalism.</li>
</ul>
<h4 id="threat-resource-exhaustion">Threat: Resource Exhaustion</h4>
<p>An attacker could cause the victim&rsquo;s server to exhaust a particular
resource (e.g. open TCP connections, CPU, memory, disk storage)</p>
<h4 id="threat-unrecoverable-consistency-violations">Threat: Unrecoverable Consistency Violations</h4>
<p>An attacker could send messages which created an unrecoverable
&ldquo;split-brain&rdquo; state in the cluster such that the victim&rsquo;s servers could
no longer derive a consistent view of the chatroom state.</p>
<h4 id="threat-bad-history">Threat: Bad History</h4>
<p>An attacker could convince the victim to accept invalid messages which
the victim would then include in their view of the chatroom history.
Other servers in the chatroom would reject the invalid messages and
potentially reject the victims messages as well since they depended on
the invalid messages.</p>
<h4 id="threat-block-network-traffic">Threat: Block Network Traffic</h4>
<p>An attacker could try to firewall traffic between the victim&rsquo;s server
and some or all of the other servers in the chatroom.</p>
<h4 id="threat-high-volume-of-messages">Threat: High Volume of Messages</h4>
<p>An attacker could send large volumes of messages to a chatroom with the
victim making the chatroom unusable.</p>
<h4 id="threat-banning-users-without-necessary-authorisation">Threat: Banning users without necessary authorisation</h4>
<p>An attacker could attempt to ban a user from a chatroom without the
necessary authorisation.</p>
<h3 id="spoofing">Spoofing</h3>
<p>An attacker could try to send a message claiming to be from the victim
without the victim having sent the message in order to:</p>
<ul>
<li>Impersonate the victim while performing illicit activity.</li>
<li>Obtain privileges of the victim.</li>
</ul>
<h4 id="threat-altering-message-contents">Threat: Altering Message Contents</h4>
<p>An attacker could try to alter the contents of an existing message from
the victim.</p>
<h4 id="threat-fake-message-origin-field">Threat: Fake Message &ldquo;origin&rdquo; Field</h4>
<p>An attacker could try to send a new message purporting to be from the
victim with a phony &ldquo;origin&rdquo; field.</p>
<h3 id="spamming">Spamming</h3>
<p>The attacker could try to send a high volume of solicited or unsolicited
messages to the victim in order to:</p>
<ul>
<li>Find victims for scams.</li>
<li>Market unwanted products.</li>
</ul>
<h4 id="threat-unsolicited-messages">Threat: Unsolicited Messages</h4>
<p>An attacker could try to send messages to victims who do not wish to
receive them.</p>
<h4 id="threat-abusive-messages">Threat: Abusive Messages</h4>
<p>An attacker could send abusive or threatening messages to the victim</p>
<h3 id="spying">Spying</h3>
<p>The attacker could try to access message contents or metadata for
messages sent by the victim or to the victim that were not intended to
reach the attacker in order to:</p>
<ul>
<li>Gain sensitive personal or commercial information.</li>
<li>Impersonate the victim using credentials contained in the messages.
(e.g. password reset messages)</li>
<li>Discover who the victim was talking to and when.</li>
</ul>
<h4 id="threat-disclosure-during-transmission">Threat: Disclosure during Transmission</h4>
<p>An attacker could try to expose the message contents or metadata during
transmission between the servers.</p>
<h4 id="threat-disclosure-to-servers-outside-chatroom">Threat: Disclosure to Servers Outside Chatroom</h4>
<p>An attacker could try to convince servers within a chatroom to send
messages to a server it controls that was not authorised to be within
the chatroom.</p>
<h4 id="threat-disclosure-to-servers-within-chatroom">Threat: Disclosure to Servers Within Chatroom</h4>
<p>An attacker could take control of a server within a chatroom to expose
message contents or metadata for messages in that room.</p>
<h2 id="cryptographic-test-vectors">Cryptographic Test Vectors</h2>
<p>To assist in the development of compatible implementations, the
following test values may be useful for verifying the cryptographic
event signing code.</p>
<h3 id="signing-key">Signing Key</h3>
<p>The following test vectors all use the 32-byte value given by the
following Base64-encoded string as the seed for generating the <code>ed25519</code>
signing key:</p>
<pre><code>SIGNING_KEY_SEED = decode_base64(
    &quot;YJDBA9Xnr2sVqXD9Vj7XVUnmFZcZrlw8Md7kMW+3XA1&quot;
)
</code></pre>
<p>In each case, the server name and key ID are as follows:</p>
<pre><code>SERVER_NAME = &quot;domain&quot;

KEY_ID = &quot;ed25519:1&quot;
</code></pre>
<h3 id="json-signing">JSON Signing</h3>
<p>Given an empty JSON object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{}</span>
</span></span></code></pre></div><p>The JSON signing algorithm should emit the following signed data:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;signatures&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;domain&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;ed25519:1&#34;</span><span class="p">:</span> <span class="s2">&#34;K8280/U9SSy9IVtjBuVeLr+HpOB4BQFWbg+UZaADMtTdGYI7Geitb76LTrr5QV/7Xg4ahLwYGYZzuHGZKM5ZAQ&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Given the following JSON object with data values in it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;one&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;two&#34;</span><span class="p">:</span> <span class="s2">&#34;Two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The JSON signing algorithm should emit the following signed JSON:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;one&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;signatures&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;domain&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;ed25519:1&#34;</span><span class="p">:</span> <span class="s2">&#34;KqmLSbO39/Bzb0QIYE82zqLwsA+PDzYIpIRA2sRQ4sL53+sN6/fpNSoqE7BP7vBZhG6kYdD13EIMJpvhJI+6Bw&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;two&#34;</span><span class="p">:</span> <span class="s2">&#34;Two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="event-signing">Event Signing</h3>
<p>Given the following minimally-sized event:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;room_id&#34;</span><span class="p">:</span> <span class="s2">&#34;!x:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;sender&#34;</span><span class="p">:</span> <span class="s2">&#34;@a:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;origin_server_ts&#34;</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;signatures&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;hashes&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;X&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;prev_events&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;auth_events&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;depth&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;unsigned&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;age_ts&#34;</span><span class="p">:</span> <span class="mi">1000000</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The event signing algorithm should emit the following signed event:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;auth_events&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;depth&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;hashes&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;sha256&#34;</span><span class="p">:</span> <span class="s2">&#34;5jM4wQpv6lnBo7CLIghJuHdW+s2CMBJPUOGOC89ncos&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;origin_server_ts&#34;</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;prev_events&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;room_id&#34;</span><span class="p">:</span> <span class="s2">&#34;!x:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;sender&#34;</span><span class="p">:</span> <span class="s2">&#34;@a:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;signatures&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;domain&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;ed25519:1&#34;</span><span class="p">:</span> <span class="s2">&#34;KxwGjPSDEtvnFgU00fwFz+l6d2pJM6XBIaMEn81SXPTRl16AqLAYqfIReFGZlHi5KLjAWbOoMszkwsQma+lYAg&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;X&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;unsigned&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;age_ts&#34;</span><span class="p">:</span> <span class="mi">1000000</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Given the following event containing redactable content:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;body&#34;</span><span class="p">:</span> <span class="s2">&#34;Here is the message content&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;event_id&#34;</span><span class="p">:</span> <span class="s2">&#34;$0:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;origin_server_ts&#34;</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;m.room.message&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;room_id&#34;</span><span class="p">:</span> <span class="s2">&#34;!r:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;sender&#34;</span><span class="p">:</span> <span class="s2">&#34;@u:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;signatures&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;unsigned&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;age_ts&#34;</span><span class="p">:</span> <span class="mi">1000000</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The event signing algorithm should emit the following signed event:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;body&#34;</span><span class="p">:</span> <span class="s2">&#34;Here is the message content&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;event_id&#34;</span><span class="p">:</span> <span class="s2">&#34;$0:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;hashes&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;sha256&#34;</span><span class="p">:</span> <span class="s2">&#34;onLKD1bGljeBWQhWZ1kaP9SorVmRQNdN5aM2JYU2n/g&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;origin&#34;</span><span class="p">:</span> <span class="s2">&#34;domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;origin_server_ts&#34;</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;m.room.message&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;room_id&#34;</span><span class="p">:</span> <span class="s2">&#34;!r:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;sender&#34;</span><span class="p">:</span> <span class="s2">&#34;@u:domain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;signatures&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;domain&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;ed25519:1&#34;</span><span class="p">:</span> <span class="s2">&#34;Wm+VzmOUOz08Ds+0NTWb1d4CZrVsJSikkeRxh6aCcUwu6pNC78FunoD7KNWzqFn241eYHYMGCA5McEiVPdhzBA&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;unsigned&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;age_ts&#34;</span><span class="p">:</span> <span class="mi">1000000</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="conventions-for-matrix-apis">Conventions for Matrix APIs</h2>
<p>This section is intended primarily to guide API designers when adding to Matrix,
setting guidelines to follow for how those APIs should work. This is important to
maintain consistency with the Matrix protocol, and thus improve developer
experience.</p>
<h3 id="http-endpoint-and-json-property-naming">HTTP endpoint and JSON property naming</h3>
<p>The names of the API endpoints for the HTTP transport follow a convention of
using underscores to separate words (for example <code>/delete_devices</code>).</p>
<p>The key names in JSON objects passed over the API also follow this convention.</p>
<div class="alert note " role="alert">
There are a few historical exceptions to this rule, such as <code>/createRoom</code>.
These inconsistencies may be addressed in future versions of this specification.
</div>
<h3 id="pagination">Pagination</h3>
<p>REST API endpoints which can return multiple &ldquo;pages&rdquo; of results should adopt the
following conventions.</p>
<ul>
<li>
<p>If more results are available, the endpoint should return a property named
<code>next_batch</code>. The value should be a string token which can be passed into
a subsequent call to the endpoint to retrieve the next page of results.</p>
<p>If no more results are available, this is indicated by <em>omitting</em> the
<code>next_batch</code> property from the results.</p>
</li>
<li>
<p>The endpoint should accept a query-parameter named <code>from</code> which the client
is expected to set to the value of a previous <code>next_batch</code>.</p>
</li>
<li>
<p>Some endpoints might support pagination in two directions (example:
<code>/messages</code>, which can be used to move forward or backwards in the timeline
from a known point). In this case, the endpoint should return a <code>prev_batch</code>
property which can be passed into <code>from</code> to receive the previous page of
results.</p>
<p>Avoid having a separate &ldquo;direction&rdquo; parameter, which is generally redundant:
the tokens returned by <code>next_batch</code> and <code>prev_batch</code> should contain enough
information for subsequent calls to the API to know which page of results
they should return.</p>
</li>
</ul>

</div>


          </main>
        </div>
      </div>
      


<footer class="py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-12 text-center text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-dark" target="_blank" rel="noopener noreferrer" href="https://github.com/matrix-org">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitLab" aria-label="GitLab">
    <a class="text-dark" target="_blank" rel="noopener noreferrer" href="https://gitlab.matrix.org/matrix-org">
      <i class="fab fa-gitlab"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="YouTube" aria-label="YouTube">
    <a class="text-dark" target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/channel/UCVFkW-chclhuyYRbmmfwt6w">
      <i class="fab fa-youtube"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-dark" target="_blank" rel="noopener noreferrer" href="https://twitter.com/matrixdotorg">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
    </div>
    <div class="row">
      <div class="col-12 text-center py-2 order-sm-3">
        <small>&copy; 2023 The Matrix.org Foundation CIC</small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    

<script src="/js/main.min.be25a680a0d95dc8b5d6664622e2134aa894220e2f224ef609e00f633a3a1b32.js" integrity="sha256-viWmgKDZXci11mZGIuITSqiUIg4vIk72CeAPYzo6GzI=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>


<script defer language="javascript" type="text/javascript"  src="/js/toc.js"></script>

  </body>
</html>
